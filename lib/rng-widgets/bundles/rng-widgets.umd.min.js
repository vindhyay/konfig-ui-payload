!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/material/button"),require("@angular/material/menu"),require("@angular/material/divider"),require("@angular/material/toolbar"),require("@angular/material/form-field"),require("@angular/material/input"),require("@angular/forms"),require("rxjs")):"function"==typeof define&&define.amd?define("@rng/widgets",["exports","@angular/core","@angular/common","@angular/material/button","@angular/material/menu","@angular/material/divider","@angular/material/toolbar","@angular/material/form-field","@angular/material/input","@angular/forms","rxjs"],e):e(((t=t||self).rng=t.rng||{},t.rng.widgets={}),t.ng.core,t.ng.common,t.ng.material.button,t.ng.material.menu,t.ng.material.divider,t.ng.material.toolbar,t.ng.material["form-field"],t.ng.material.input,t.ng.forms,t.rxjs)}(this,function(t,e,n,a,r,i,o,s,l,c,u){"use strict";var m=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{exports:[a.MatButtonModule,r.MatMenuModule,i.MatDividerModule,o.MatToolbarModule,s.MatFormFieldModule,l.MatInputModule]}]}],t}(),g=function(){function t(){this.size=32,this.imgWidth=0,this.imgHeight=0,this.imgClass="square",this.localImageURL=null,this.localAltText=""}return Object.defineProperty(t.prototype,"data",{get:function(){return this.localData},set:function(t){this.localImageURL=null,this.localAltText="",this.localData=t,this.initImage()},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.initImage()},t.prototype.ngOnChanges=function(){this.initImage()},t.prototype.initImage=function(){var t=this;if(this.data&&this.data.imageUrl&&this.data.imageUrl.length>0?this.localImageURL=this.data.imageUrl:this.imageUrl&&this.imageUrl.length>0&&(this.localImageURL=this.imageUrl),this.localImageURL){var e=new Image;e.addEventListener("load",function(e){return t.handleImageLoad(e)}),e.src=this.localImageURL}this.data&&this.data.name&&this.data.name.length>0&&(this.localAltText=this.data.name),this.placeholder&&this.placeholder.length>0&&(this.localAltText=this.placeholder),this.generateInitial(this.localAltText)},t.prototype.handleImageLoad=function(t){this.imgWidth=t.target.width,this.imgHeight=t.target.height,this.imgWidth>this.imgHeight&&(this.imgClass="landscape-img"),this.imgWidth<this.imgHeight&&(this.imgClass="portrait-img")},t.prototype.generateInitial=function(t){if(t){var e=["orange","dark-orange","red","pink","green","light-green","blue","darken-blue","dark-blue","purple","brown","dark","gray"];this.initial=this.getInitial(t),this.initialColor=e[this.hashCode(this.initial)%e.length]}},t.prototype.getInitial=function(t){return t.match(/\b(\w)/g).join("")},t.prototype.hashCode=function(t){var e=0;if(0===t.length)return e;for(var n=0;n<t.length;n++){e=(e<<5)-e+t.charCodeAt(n),e|=0}return e},t.decorators=[{type:e.Component,args:[{selector:"rng-image",template:'<div class="avatar s-{{size}}">\n  <img *ngIf="localImageURL"\n    ngClass="{{imgClass}}"\n    src="{{localImageURL}}"\n    alt="{{localAltText}}" />\n  <span *ngIf="!localImageURL"\n    class="bg {{initialColor}}">{{initial}}</span>\n</div>\n'}]}],t.ctorParameters=function(){return[]},t.propDecorators={size:[{type:e.Input}],data:[{type:e.Input}],imageUrl:[{type:e.Input}],placeholder:[{type:e.Input}]},t}(),h={XLSX:0,DOCX:1,HTML:2,XML:3,ZIP:4,PDF:5,IMAGE:6,VIDEO:7};h[h.XLSX]="XLSX",h[h.DOCX]="DOCX",h[h.HTML]="HTML",h[h.XML]="XML",h[h.ZIP]="ZIP",h[h.PDF]="PDF",h[h.IMAGE]="IMAGE",h[h.VIDEO]="VIDEO";var p={SMALL:"small",WIDGET:"widget",ROUND:"round",PORTRAIT:"portrait",LANDSCAPE:"landscape"},d={SMALL:32,WIDGET:120};d[d.SMALL]="SMALL",d[d.WIDGET]="WIDGET";var f=function(){function t(){this.size=d.SMALL,this.containerClass=[p.SMALL]}return Object.defineProperty(t.prototype,"previewData",{set:function(t){this.type=t.docType,this.previewURL=t.previewURL,this.size=t.previewSize||d.SMALL,this.round=t.round||!1,this.initPreview()},enumerable:!0,configurable:!0}),t.prototype.initPreview=function(){var t=this;if(this.localPreviewURL=null,this.containerClass=[p.SMALL],this.containerImageStyle=null,this.iconClass=null,this.size===d.WIDGET&&(this.containerClass=[p.WIDGET]),this.previewURL&&this.previewURL.length&&(this.localPreviewURL=this.previewURL),this.round&&this.containerClass.push(p.ROUND),this.localPreviewURL){this.containerImageStyle={"background-image":"url("+this.localPreviewURL+")"};var e=new Image;e.addEventListener("load",function(e){return t.handleImageLoad(e)}),e.src=this.localPreviewURL}else this.iconClass=this.docTypeIconClass(this.type)},t.prototype.handleImageLoad=function(t){var e=t.path[0];console.log("handleImageLoad",e),e.width>e.height&&this.containerClass.push(p.LANDSCAPE),e.width<e.height&&this.containerClass.push(p.PORTRAIT)},t.prototype.docTypeIconClass=function(t){switch(t){case h.DOCX:return["rng-icon-word_24px_outlined","ms-blue"];case h.XLSX:return["rng-icon-excel_24px","ms-green"];case h.PDF:return["rng-icon-pdf_24px","adobe-red"];case h.IMAGE:return["rng-icon-image","gray"];case h.VIDEO:return["rng-icon-video","gray"];default:return["rng-icon-generic_doc","gray"]}},t.decorators=[{type:e.Component,args:[{selector:"rng-preview",template:'<div class="rng-preview-container" \n  [ngClass]="containerClass"\n  [ngStyle]="containerImageStyle">\n  <i *ngIf="iconClass"\n    class="rng-icon"\n    [ngClass]="iconClass"></i>\n</div>\n  '}]}],t.propDecorators={previewData:[{type:e.Input}]},t}(),I=function(){function t(){this.changeItem=new e.EventEmitter,this.showName=!0}return Object.defineProperty(t.prototype,"currentName",{get:function(){return this.itemAvatar(this.currentItem).name},enumerable:!0,configurable:!0}),t.prototype.itemAvatar=function(t){return t?"avatar"in t?t.avatar:t:this.placeholderItem||{}},t.prototype.itemName=function(t){return this.itemAvatar(t).name},t.prototype.clickFunction=function(t){this.currentItem=t,this.changeItem.emit(t)},t.decorators=[{type:e.Component,args:[{selector:"rng-iconed-menu",template:'<div class="rng-iconed-menu">\n  <button mat-flat-button\n    [matMenuTriggerFor]="menu"\n    (click)="$event.stopPropagation()">    \n    <div *ngIf="showName; else avatarOnly"\n      class="current-item-wrapper">\n      <rng-iconed-name\n        [data]="itemAvatar(currentItem)"></rng-iconed-name>\n      <i class="rng-icon rng-icon-arrow_drop_down"></i>\n    </div>\n    <ng-template #avatarOnly>\n      <rng-image \n        [data]="itemAvatar(currentItem)"></rng-image>\n    </ng-template>\n  </button>\n  <mat-menu #menu="matMenu"\n    class="rng-iconed-menu-list">\n    <button mat-menu-item\n      class="rng-iconed-menu-item"\n      *ngFor="let item of items"\n      (click)="clickFunction(item)">\n      <rng-iconed-name\n        [data]="itemAvatar(item)"></rng-iconed-name>\n    </button>\n  </mat-menu>\n</div>'}]}],t.propDecorators={changeItem:[{type:e.Output}],items:[{type:e.Input}],placeholderItem:[{type:e.Input}],showName:[{type:e.Input}],currentItem:[{type:e.Input}]},t}(),v=function(){function t(){}return Object.defineProperty(t.prototype,"avatarName",{get:function(){return this.avatar.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"avatar",{get:function(){return this.data?"avatar"in this.data?this.data.avatar:this.data:{}},enumerable:!0,configurable:!0}),t.decorators=[{type:e.Component,args:[{selector:"rng-iconed-name",template:'<div class="rng-iconed-name">\n  <rng-image size="32"\n    [data]="avatar"></rng-image>\n  <div class="avatar-name">          \n    {{ avatarName }}\n  </div>\n</div>\n'}]}],t.propDecorators={data:[{type:e.Input}]},t}(),y=function(){function t(){var t=this;this.withSearch=!1,this.searchChange=new e.EventEmitter,this.searchToggle=!1,this.searchText="",this.search=new c.FormControl,this.subscription=new u.Subscription,this.changeSearch=function(e){return t.searchChange.emit(e)}}return t.prototype.toggleSearch=function(t){var e=this;this.searchToggle=t,t?setTimeout(function(){return e.searchfield.nativeElement.focus()},0):this.search.setValue("")},t.prototype.ngAfterViewInit=function(){var t=this;this.subscription.add(this.search.valueChanges.subscribe(function(e){return t.changeSearch(e)}))},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.decorators=[{type:e.Component,args:[{selector:"rng-compact-toolbar",template:'<mat-toolbar>\n  <mat-toolbar-row *ngIf="!searchToggle">\n    <span>{{title}}</span>\n    <span class="spacer"></span>\n    <ng-content></ng-content>\n    <button mat-icon-button *ngIf="withSearch"\n      (click)="toggleSearch(true)">\n      <i class="rng-icon rng-icon-search"></i>\n    </button>    \n  </mat-toolbar-row>\n  <mat-toolbar-row *ngIf="searchToggle">\n    <div class="spacer">\n      <mat-form-field appearance="none"\n        class="full-width">\n        <input matInput #searchfield\n          type="search"\n          [formControl]="search">\n      </mat-form-field>\n    </div>\n    <button mat-icon-button *ngIf="withSearch"\n      class="button-toggle"\n      (click)="toggleSearch(false)">\n      <i class="rng-icon rng-icon-search"></i>\n    </button>    \n  </mat-toolbar-row>\n</mat-toolbar>\n  \n'}]}],t.propDecorators={title:[{type:e.Input}],withSearch:[{type:e.Input}],searchChange:[{type:e.Output}],searchfield:[{type:e.ViewChild,args:["searchfield",{static:!1}]}]},t}(),b=function(){function t(){var t=this;this.itemClick=new e.EventEmitter,this.onItemClick=function(e){t.currentItem=t.showKey?e[t.showKey]:e,t.itemClick.emit(e)}}return t.decorators=[{type:e.Component,args:[{selector:"rng-named-menu",template:'<div class="rng-named-menu">\n  <button mat-flat-button\n    [matMenuTriggerFor]="menu"\n    (click)="$event.stopPropagation()">\n    <div class="current-item-wrapper">\n      <span class="current-item-name">{{currentItem}}</span>\n      <i class="rng-icon rng-icon-arrow_drop_down"></i>\n    </div>\n  </button>\n  <mat-menu #menu="matMenu"\n    class="rng-named-menu-list">\n    <button mat-menu-item\n      class="rng-named-menu-item"\n      *ngFor="let item of items"\n      (click)="onItemClick(item)">{{showKey ? item[showKey]: item}}\n    </button>\n  </mat-menu>\n</div>\n'}]}],t.propDecorators={items:[{type:e.Input}],currentItem:[{type:e.Input}],showKey:[{type:e.Input}],itemClick:[{type:e.Output}]},t}(),w=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[g,f,I,v,y,b],imports:[n.CommonModule,m,c.FormsModule,c.ReactiveFormsModule],exports:[g,f,I,v,y,b]}]}],t}();t.CompactToolbarComponent=y,t.DocType=h,t.IconedMenuComponent=I,t.IconedNameComponent=v,t.ImageComponent=g,t.NamedMenuComponent=b,t.PreviewComponent=f,t.PreviewSize=d,t.PreviewType=p,t.RngWidgetsModule=w,t.ɵa=m,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=rng-widgets.umd.min.js.map